.model small
.stack 100h

.data
filename    db "test.in", 0
buffer      db 255 dup (?)  ; Буфер для збереження рядка

.code
main:
    ; Відкриття файлу
    mov ah, 3Dh       ; Функція для відкриття файлу
    mov al, 0         ; Режим доступу (0 - читання)
    lea dx, filename  ; Адреса імені файлу
    int 21h           ; Виклик системного переривання DOS

    jc error          ; Перевірка на помилку (якщо CF встановлено, сталася помилка)

    mov bx, ax        ; Збереження дескриптора файлу

    ; Читання рядка з файлу
    mov ah, 3Fh       ; Функція для читання з файлу
    mov cx, 255       ; Максимальна довжина рядка
    lea dx, buffer    ; Адреса буфера для збереження рядка
    int 21h           ; Виклик системного переривання DOS

    jc error_read     ; Перевірка на помилку

    ; Обробка рядка (за потреби)
    ; Наприклад, виведення рядка на екран
    mov ah, 09h       ; Функція для виведення рядка
    lea dx, buffer    ; Адреса початку рядка
    int 21h           ; Виклик системного переривання DOS

    ; Закриття файлу
    mov ah, 3Eh       ; Функція для закриття файлу
    mov bx, bx        ; Передача дескриптора файлу
    int 21h           ; Виклик системного переривання DOS

    ; Вихід з програми
    mov ah, 4Ch       ; Функція для виходу з програми
    int 21h           ; Виклик системного переривання DOS

error:
    ; Обробка помилки відкриття файлу
    ; Ваш код обробки помилки

    ; Вихід з програми
    mov ah, 4Ch       ; Функція для виходу з програми
    int 21h           ; Виклик системного переривання DOS

error_read:
    ; Обробка помилки читання з файлу
    ; Ваш код обробки помилки

    ; Вихід з програми
    mov ah, 4Ch       ; Функція для виходу з програми
    int 21h           ; Виклик системного переривання DOS

end main
